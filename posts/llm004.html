<!DOCTYPE HTML>


<html>
	<head>
		<title>Scott Seidel</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="../assets/css/main.css" />
		<link rel="icon" href="../media/icon1.png" type="image/png">
		<noscript><link rel="stylesheet" href="../assets/css/noscript.css" /></noscript>
		<script type="text/javascript" async
        	src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
    	</script>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<a href="../index.html" class="logo">Scott Seidel</a>
					</header>

				<!-- Nav -->
					<nav id="nav">
						<ul class="links">
							<li><a href="../index.html">About</a></li>
							<li><a href="../experience.html">Experience</a></li>
							<li><a href="../musings.html">Musings</a></li>
							<li class="active"><a href="llm004.html">Full Post</a></li>
						</ul>
						
						<ul class="icons">
							<li><a href="https://www.linkedin.com/in/scott-seidel" class="icon brands fa-linkedin"><span class="label">LinkedIn</span></a></li>
<!--
							<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
							<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
							<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
							<li><a href="#" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
-->
						</ul>

					</nav>

				<!-- Main -->
					<div id="main">

						<!-- Post -->
						<section class="post">
						    <header class="major">
						        <span class="date">July 23, 2024</span>
						        <h1>Role of Data Quality in Training LLMs</h1>
						        <p>#data #LLM #commentary</p>
						    </header>

						    <p>When training large language models, the quality of the data is as crucial as its quantity. This concept can be explored by looking at the <a href="https://arxiv.org/abs/2005.14165">"Language Models are Few-Shot Learners"</a> paper by OpenAI, which delves into the training process of GPT-3.</p>

						    <h2>Raw Data vs Usable Data</h2>
						    <p>GPT-3's training began with a staggering 45 TB of compressed plaintext data collected from monthly Common Crawl datasets spanning 2016 to 2019. The researchers noted that this volume was sufficient to train even their largest models without repeating sequences. However, they discovered that filtering this data significantly enhanced model performance. The filtering process involved two key steps:</p>

						    <ul>
						        <li>Filtering data based on similarity to high-quality reference corpora.</li>
						        <li>Conducting fuzzy deduplication to eliminate redundancy and prevent overfitting.</li>
						    </ul>

						    <p>These steps reduced the data set from 45TB to just 570GB, a 98.7% reduction! Despite the dramatic decrease in volume, the filtered data outperformed the unfiltered data.</p>

						    <h2>The Importance of High-Quality Data Sources</h2>
						    <p>Even after filtering, the researchers recognized the need for additional high-quality data sources to supplement their training data. To this end, they incorporated:</p>

						    <ul>
						        <li><a href="https://openwebtext2.readthedocs.io/en/latest/background/">WebText2</a> - 40 GB of content scraped from web links found in up-voted Reddit posts.</li>
						        <li><a href="https://huggingface.co/datasets/bookcorpus/bookcorpus">Books1</a> - Likely referring to the 6GB BookCorpus data set on HuggingFace, containing 7,185 unique books with at least 20,000 words each, self-published on Smashwords.com.</li>
						        <li>Books2 - Details remain undisclosed, but in reading between the lines, I speculate this data set contains around 9GB of high-quality, technical reference materials, potentially medical sources and scientific papers.</li>
						        <li><a href="https://en.wikipedia.org/wiki/Wikipedia:Size_of_Wikipedia">Wikipedia (English version)</a> - Comprising approximately 4.5 billion words, translating to around 27GB of text data.</li>
						    </ul>

						    <p>These additional sources feature an extra layer of human input, distinguishing them from raw web-scraped data. WebText2 relies on community-curated links via Reddit up-votes. Books1 includes self-published long-form texts, while Books2 likely features peer-reviewed or edited technical content. Wikipedia, renowned for its comprehensive and standardized content, stands as a great source for a broad range of high-quality information.</p>

						    <div class="image main">
						        <img src="../media/gpt3_data.png" alt="GPT-3 Data" style="display: block; margin: 4rem 0; width: 70%; margin-left: auto; margin-right: auto;"/>
						    </div>

						    <h2>Oversampling Higher Quality Sources</h2>
						    <p>Statistics from the GPT-3 training process reveal how frequently each data set was utilized on average during the training of 300 billion tokens:</p>

						    <ul>
						        <li>Wikipedia - 3.4 times</li>
						        <li>WebText2 - 2.9 times</li>
						        <li>Books1 - 1.9 times</li>
						        <li>Common Crawl (filtered) - 0.44 times</li>
						        <li>Books2 - 0.43 times</li>
						    </ul>

						    <p>This data underscores the necessity of not only including high-quality sources but also oversampling them to optimize the model. Wikipedia, WebText2, and Books1 were used significantly more than the filtered Common Crawl data, by factors ranging from 4.3 to 7.7 times (on a per unit basis). Books2 was sampled less frequently, likely due to its speculated highly specialized nature, which would aligning with the goal of training a general-purpose model.</p>

						    <h2>Conclusion</h2>
						    <p>Examining the choices behind GPT-3's training data highlights the critical role of data quality in model performance. Although 45TB of unfiltered web data was available, the optimal performance was achieved with a curated and oversampled set of high-quality sources, totaling approximately 650GB. This raises important questions about the future of large-scale, high-quality datasets as models continue to grow in complexity and size. Who will be responsible for creating these datasets, and what legal considerations will arise?</p>

						    <ul class="actions special">
						        <li><a href="../musings.html" class="button large">Musings</a></li>
						    </ul>
						</section>
							


						<!-- Footer -->
							<footer>
								
							</footer>

					</div>



				<!-- Copyright -->
					<div id="copyright">
						<ul><li>&copy; 2024</li><li>Based in California</li></ul>
					</div>

			</div>

		<!-- Scripts -->
			<script src="../assets/js/jquery.min.js"></script>
			<script src="../assets/js/jquery.scrollex.min.js"></script>
			<script src="../assets/js/jquery.scrolly.min.js"></script>
			<script src="../assets/js/browser.min.js"></script>
			<script src="../assets/js/breakpoints.min.js"></script>
			<script src="../assets/js/util.js"></script>
			<script src="../assets/js/main.js"></script>

	</body>
</html>